{% extends 'index.html' %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col s12 m8 offset-m2 l6 offset-l3">
                <div class="card">
                    <div class="card-content" style="padding: 20px">
                        <span class="card-title center">New Order for {{ p_surname }} {{ p_name }}</span>
                        <form method="POST" action="{{ url_for('register_new_order', patient_id=id) }}">
                        {{ form.csrf_token }}
                        {{ form.hidden_tag() }}
                            <div class="divider"></div>
                            <h5>Placer Infos</h5>
                            <div class="form-row">
                                <div class="input-field">
                                        {{ form.ordering_physician_identifier.label }}
                                        {{ form.ordering_physician_identifier(class="validate") }}
                                </div>
                                <div class="input-field">
                                    {{ form.ordering_physician_name.label }}
                                    {{ form.ordering_physician_name(class="validate") }}
                                </div>
                                <div class="input-field">
                                    {{ form.ordering_physician_surname.label }}
                                    {{ form.ordering_physician_surname(class="validate") }}
                                </div>
                                <div class="input-field">
                                    {{ form.placer_department.label }}
                                    {{ form.placer_department(class="validate") }}
                                </div>
                                <div class="divider"></div>
                                <h5>Order Infos</h5>
                                <div class="input-field">
                                    {{ form.imaging_modality() }}
                                </div>
                                <div class="input-field">
                                    {{ form.procedure() }}
                                </div>
                                <div class="input-field">
                                    {{ form.add_note.label }}
                                    {{ form.add_note(class="materialize-textarea") }}
                                </div>
                                <a class="btn waves-effect waves-light" onclick="fetchSlots('{{ id }}')">Schedule</a>
                                <div id="schedule-id" class="input-field">
                                    {{ form.slots() }}
                                </div>
                            </div>
                            <div class="card-action">
                                <button id="register-order-button" class="btn waves-effect waves-light" type="submit" name="action" disabled>Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- CUSTOM SCRIPT LOADING -->
    <script type="text/javascript" src="../js/pickers.js"></script>
    <script type="text/javascript" src="../js/dynamic_procedures.js"></script>
    <script type="text/javascript" src="../js/get_slots_schedule.js"></script>
{% endblock %}